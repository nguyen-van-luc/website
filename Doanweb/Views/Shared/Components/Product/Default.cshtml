@model IEnumerable<Doanweb.Models.TbProduct>

@foreach (var item in Model)
{
    string sUrl = $"/product/{item.Alias}-{item.ProductId}.html";
    <div class="col-xl-3 col-lg-4 col-sm-6">
        <div class="product-item">
            <div class="product-img img-zoom-effect">
                <a href="@sUrl">
                    @{
                        var imgFile = item.Image ?? "";
                        string imgSrc;
                        if (string.IsNullOrWhiteSpace(imgFile))
                        {
                            imgSrc = Url.Content("~/assets/images/no-image.png");
                        }
                        else if (imgFile.StartsWith("http", StringComparison.OrdinalIgnoreCase) || imgFile.StartsWith("/"))
                        {
                            imgSrc = imgFile.StartsWith("/") ? Url.Content(imgFile) : imgFile;
                        }
                        else
                        {
                            imgSrc = Url.Content($"~/assets/images/product/medium-size/{imgFile.TrimStart('/')}");
                        }
                    }
                   <img class="img-full" src="@imgSrc" alt="@item.Title" onerror="this.onerror=null;this.src='@Url.Content("~/assets/images/no-image.png")'" />
                 </a>
                <div class="product-add-action">
                    <ul>
                        <li>
                            <a href="#"
                               class="js-add-to-cart"
                               data-product-id="@item.ProductId">
                                <i class="pe-7s-cart"></i>
                            </a>
                        </li>
                        <li><a href="compare.html"><i class="pe-7s-shuffle"></i></a></li>
                        <li><a href="wishlist.html"><i class="pe-7s-like"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="product-content">
                <a class="product-name" href="@sUrl">@item.Title</a>
                <div class="price-box pb-1">

                    @if (item.PriceSale > 0)
                    {
                        <span class="new-price text-danger">@item.Price</span>
                        <span class="old-price text-primary">@item.PriceSale</span>
                    }
                    else
                    {
                        <span class="new-price text-primary">@item.Price</span>
                    }

                </div>
                <div class="rating-box">
                    <ul>
                        @for (int i = 0; i < item.Star; i++)
                        {
                            <li><i class="pe-7s-star"></i></li>
                        }
                        </ul>
                </div>
            </div>
        </div>
    </div>
}
